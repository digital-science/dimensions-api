      
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The Dimcli Python library: Installation and Querying &#8212; API Lab - reusable notebooks for research data analytics - powered by Dimensions Analytics API</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/custom.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Exploring The Dimensions Search Language (DSL)" href="2-Understanding-query-results.html" />
    <link rel="prev" title="Verifying Your API Connection" href="0-Verifying-your-connection.html" />
       

		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149959808-1"></script>
		<!-- <script src="_static/js/custom.js"></script> -->


      
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2-Understanding-query-results.html" title="Exploring The Dimensions Search Language (DSL)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0-Verifying-your-connection.html" title="Verifying Your API Connection"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">API Lab - reusable notebooks for research data analytics - powered by Dimensions Analytics API</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<hr class="docutils" />
<a class="reference external image-reference" href="https://colab.research.google.com/github/digital-science/dimensions-api-lab/blob/master/cookbooks/1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.ipynb"><img alt="../../_images/badge-colab.svg" src="../../_images/badge-colab.svg" /></a>
<a class="reference external image-reference" href="https://github.com/digital-science/dimensions-api-lab/blob/master/cookbooks/1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.ipynb"><img alt="../../_images/badge-github-custom.svg" src="../../_images/badge-github-custom.svg" /></a>
<a class="reference external image-reference" href="https://www.dimensions.ai/dimensions-apis/"><img alt="../../_images/badge-dimensions-api.svg" src="../../_images/badge-dimensions-api.svg" /></a>
<hr class="docutils" />
<div class="section" id="The-Dimcli-Python-library:-Installation-and-Querying">
<h1>The Dimcli Python library: Installation and Querying<a class="headerlink" href="#The-Dimcli-Python-library:-Installation-and-Querying" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this notebook is to show how to use Dimcli. <a class="reference external" href="https://github.com/lambdamusic/dimcli">Dimcli</a> is an open source Python client for accessing the Dimensions Analytics API. It makes it easier to authenticate against the API, send queries to it and process the JSON data being returned.</p>
<p>Dimcli includes also a command line interface (CLI) that aims at simplifying the process of learning the grammar of the Dimensions Search Language (DSL). Running <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> from the terminal opens up an interactive query console with syntax autocomplete, persistent history across sessions, pretty-printing and preview of JSON results, export to HTML and CSV, and more.</p>
<blockquote>
<div><p>This guide assumes that you already have a Python 3 working environment and <a class="reference external" href="https://pypi.org/project/pip/">pip</a> - the python package manager - installed. For more background, see this <a class="reference external" href="https://realpython.com/installing-python/">link</a>.</p>
</div></blockquote>
<div class="section" id="Installation">
<h2>Installation<a class="headerlink" href="#Installation" title="Permalink to this headline">¶</a></h2>
<p>You can install DimCli as follows from a Jupyter notebook:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>pip install dimcli -U
</pre></div>
</div>
</div>
<p>Then each time you want to use it within a notebook you can load it like this:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">dimcli</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Authentication">
<h2>Authentication<a class="headerlink" href="#Authentication" title="Permalink to this headline">¶</a></h2>
<p>There are <a class="reference external" href="https://github.com/lambdamusic/dimcli#the-credentials-file">different ways</a> to authenticate with the Dimensions API using DimCli. The easiest is passing your credentials explicilty like this:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;dimensions-username@me.com&quot;</span><span class="p">,</span>
             <span class="n">password</span><span class="o">=</span><span class="s2">&quot;my-secret-password&quot;</span><span class="p">,</span>
             <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://your-url.dimensions.ai&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This method could be handy if you quickly want to login and cannot save a credentials file. However, this method is not ideal if you want to protect your credentials, especially within a shared environment.</p>
<div class="section" id="More-secure-method:-storing-a-private-credentials-file">
<h3>More secure method: storing a private credentials file<a class="headerlink" href="#More-secure-method:-storing-a-private-credentials-file" title="Permalink to this headline">¶</a></h3>
<p>DimCli allows you to store your access credentials (e.g. email and password) in a file on your computer, so that you don’t have to type it in each time.</p>
<p>If you have access to a terminal prompt, you can use Dimcli’s setup assistant to automatically create the API credentials file (for more info see also <a class="reference external" href="https://github.com/digital-science/dimcli#creating-a-credentials-file-using-the-helper-script-recommended">the docs</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dimcli</span> <span class="o">--</span><span class="n">init</span>
</pre></div>
</div>
<p>Alternatively, if you don’t have access to a terminal prompt, you can create the credentials file manually as follows:</p>
<ul class="simple">
<li><p>create a file called <code class="docutils literal notranslate"><span class="pre">dsl.ini</span></code> in the uppermost directory where your notebooks are located</p></li>
<li><p>open the file and add your credentials, making sure that</p>
<ul>
<li><p>the text structure is <strong>exactly</strong> the same as below (in particular, don’t change the <code class="docutils literal notranslate"><span class="pre">instance.live</span></code> directive unless you know what you’re doing!)</p></li>
<li><p>you update the login and password fields as needed!</p></li>
</ul>
</li>
</ul>
<p>This is what the <code class="docutils literal notranslate"><span class="pre">dsl.ini</span></code> file should look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">live</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">app</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ai</span>
<span class="n">login</span><span class="o">=</span><span class="n">user</span><span class="nd">@mail</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">yourpasswordhere</span>
</pre></div>
</div>
<p>Then, all you have to do is:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DimCli v0.6.2 - Succesfully connected to &lt;https://app.dimensions.ai&gt; (method: dsl.ini file)
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Querying">
<h2>Querying<a class="headerlink" href="#Querying" title="Permalink to this headline">¶</a></h2>
<p>Dimcli provides a few handy shortcuts for querying the API.</p>
<div class="section" id="Simple-Querying">
<h3>Simple Querying<a class="headerlink" href="#Simple-Querying" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;black holes&quot; return publications&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Publications: 20 (total = 1411777)
</pre></div></div>
</div>
<p>By default, Dimcli prints out a short statement with info about the query. You can turn that off by passing the argument <code class="docutils literal notranslate"><span class="pre">verbose=False</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;black holes&quot; return publications&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># no feedback this time!</span>
</pre></div>
</div>
</div>
<p>The raw json data is accessible via the <code class="docutils literal notranslate"><span class="pre">json</span></code> property of the resulting object.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>dict_keys([&#39;_stats&#39;, &#39;publications&#39;])
</pre></div>
</div>
</div>
<p>The main JSON keys of the data returned are accessible as properties</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">publications</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>20
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">count_batch</span></code> and <code class="docutils literal notranslate"><span class="pre">count_total</span></code> methods provide quick shortcuts to find out how many records are available:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We got&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">count_batch</span><span class="p">,</span> <span class="s2">&quot;results out of&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">count_total</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
We got 20 results out of 1411777
</pre></div></div>
</div>
<p>If the query returns an error, the <code class="docutils literal notranslate"><span class="pre">errors</span></code> and <code class="docutils literal notranslate"><span class="pre">errors_string</span></code> methods can be handy too:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># ps errors are printed out by default</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;black holes&quot; return spaceships&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned Errors: 1
Semantic Error
Semantic errors found:
        Facet &#39;spaceships&#39; is not present in source &#39;publications&#39;. Available facets are: FOR,FOR_first,HRCS_HC,HRCS_RAC,RCDC,category_bra,category_for,category_hra,category_hrcs_hc,category_hrcs_rac,category_icrp_cso,category_icrp_ct,category_rcdc,category_ua,funder_countries,funders,journal,journal_lists,mesh_terms,open_access_categories,publisher,research_org_cities,research_org_countries,research_org_state_codes,research_orgs,researchers,times_cited,type,year
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">errors_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Semantic ErrorSemantic errors found:
        Facet &#39;spaceships&#39; is not present in source &#39;publications&#39;. Available facets are: FOR,FOR_first,HRCS_HC,HRCS_RAC,RCDC,category_bra,category_for,category_hra,category_hrcs_hc,category_hrcs_rac,category_icrp_cso,category_icrp_ct,category_rcdc,category_ua,funder_countries,funders,journal,journal_lists,mesh_terms,open_access_categories,publisher,research_org_cities,research_org_countries,research_org_state_codes,research_orgs,researchers,times_cited,type,year
</pre></div></div>
</div>
</div>
<div class="section" id="Iterative-querying-(loops)">
<h3>Iterative querying (loops)<a class="headerlink" href="#Iterative-querying-(loops)" title="Permalink to this headline">¶</a></h3>
<p>Dimcli includes a utility method for looping over a query that produces <strong>more than 1000 results</strong> (the max number of records a single query can return). This method basically generates a loop in the background, which goes through all results available for a query using the <a class="reference external" href="https://docs.dimensions.ai/dsl/language.html#paginating-results">limit/skip syntax</a>.</p>
<p>Looped queries are very useful e.g. if you want to quickly extract a full dataset. There are a few things to remember though:</p>
<ul class="simple">
<li><p>Each query happens after <strong>one second</strong>, so to comply with the 30 queries per minute API limit.</p></li>
<li><p>The results are collated into a single <code class="docutils literal notranslate"><span class="pre">dimcli.Dataset</span></code> object (same as with normal querying) that can be accessed via the methods illustrated above. So no need for any extra aggregration step when the query completes.</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">verbose=False</span></code> to off the notifications e.g. within a larger script with multiple steps.</p></li>
<li><p>You can pass <code class="docutils literal notranslate"><span class="pre">limit</span> <span class="pre">=</span> <span class="pre">500</span></code> (or any other number &lt;=1000) to specify how many records to extract per iteration - which by default is 1000 (the max amount). This can be handy i.e. when a query is particularly long and so it may impact the API performance (or cause an error); in this case returning less records per iteration ensures that the API server never gets overloaded.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query_iterative</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;black holes&quot; where year=1990 and times_cited &gt; 10 return publications&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1000 / 3077
2000 / 3077
3000 / 3077
3077 / 3077
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">publications</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>3077
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Command-line-interface">
<h2>Command line interface<a class="headerlink" href="#Command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>If you have access to a command-prompt or terminal, Dimcli includes a handy <a class="reference external" href="https://en.wikipedia.org/wiki/Command-line_interface">Command Line Interface</a> that allows to query the Dimensions API interactively, similarly to what a <em>query console</em> would do.</p>
<p>The CLI has several features but, most importantly, it allows to use the TAB key to autocomplete your queries (based on the latest API syntax and fields), which makes it an ideal tool for both newbies and expert users.</p>
<div class="section" id="Running-the-CLI">
<h3>Running the CLI<a class="headerlink" href="#Running-the-CLI" title="Permalink to this headline">¶</a></h3>
<p>On a Jupyterlab environment, for example, use the menu <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">&gt;</span> <span class="pre">new</span> <span class="pre">&gt;</span> <span class="pre">terminal</span></code> to open a terminal window. Then simply type in <code class="docutils literal notranslate"><span class="pre">dimcli</span></code> to start:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dimcli

Dimcli - Dimensions API Client (v0.6.6.5)
Welcome! Type help for more info.
Using endpoint: https://app.dimensions.ai - DSL version: 1.23.1

&gt; help

COMMANDS LIST
====================
All special commands start with &#39;.&#39;
----
&gt;&gt;&gt; help: show this help message
----
&gt;&gt;&gt; &lt;tab&gt;:  autocomplete.
----
&gt;&gt;&gt; .docs: print out documentation for DSL data objects.
&gt;&gt;&gt; .export_as_json: save results from last query as JSON file.
&gt;&gt;&gt; .export_as_csv: save results from last query as CSV file.
&gt;&gt;&gt; .export_as_html: save results from last query as HTML file.
&gt;&gt;&gt; .export_as_bar_chart: save results from last query as Plotly bar chart.
&gt;&gt;&gt; .show [optional: N]: print N results from last query, trying to build URLs for objects. Default N=10.
&gt;&gt;&gt; .json_compact: print results of last query as single-line JSON.
&gt;&gt;&gt; .json_full: print results of last query as formatted JSON.
&gt;&gt;&gt; .url: resolve a Dimensions ID into a public URL.
----
&gt;&gt;&gt; &lt;Ctrl-o&gt;: search docs online.
&gt;&gt;&gt; &lt;Ctrl-c&gt;: abort query.
&gt;&gt;&gt; &lt;Ctrl-d&gt;: exit console.
----
&gt;&gt;&gt; quit: exit console
====================
</pre></div>
</div>
<p>See the video below for a quick demonstration of the query autocomplete functionalities, or please visit the <a class="reference external" href="https://github.com/digital-science/dimcli#dimcli-as-a-command-line-interface">Github repo</a> for more information.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="k">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span> <span class="s2">&quot;http://api-sample-data.dimensions.ai/videos/dimcli_animated.gif&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<img src="http://api-sample-data.dimensions.ai/videos/dimcli_animated.gif" width="800"/></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference external" href="https://www.dimensions.ai/dimensions-apis/">Dimensions Analytics API</a> allows to carry out sophisticated research data analytics tasks like the ones described on this website. Check out also the associated <a class="reference external" href="https://github.com/digital-science/dimensions-api-lab">Github repository</a> for examples, the source code of these tutorials and much more.</p>
</div>
<a class="reference external image-reference" href="https://www.dimensions.ai/dimensions-apis/"><img alt="../../_images/badge-dimensions-api.svg" src="../../_images/badge-dimensions-api.svg" /></a>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/dimensions-logo.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Dimcli Python library: Installation and Querying</a><ul>
<li><a class="reference internal" href="#Installation">Installation</a></li>
<li><a class="reference internal" href="#Authentication">Authentication</a><ul>
<li><a class="reference internal" href="#More-secure-method:-storing-a-private-credentials-file">More secure method: storing a private credentials file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Querying">Querying</a><ul>
<li><a class="reference internal" href="#Simple-Querying">Simple Querying</a></li>
<li><a class="reference internal" href="#Iterative-querying-(loops)">Iterative querying (loops)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Command-line-interface">Command line interface</a><ul>
<li><a class="reference internal" href="#Running-the-CLI">Running the CLI</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="0-Verifying-your-connection.html"
                        title="previous chapter">Verifying Your API Connection</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="2-Understanding-query-results.html"
                        title="next chapter">Exploring The Dimensions Search Language (DSL)</a></p>




<div id="sidebar_github" style="margin-top: 12px;">
<h3>Github Source</h3>

    <div style="margin: 10px 20px;">
    
        <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>

        <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=fork&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe> 
    
    </div>





</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2-Understanding-query-results.html" title="Exploring The Dimensions Search Language (DSL)"
             >next</a> |</li>
        <li class="right" >
          <a href="0-Verifying-your-connection.html" title="Verifying Your API Connection"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">API Lab - reusable notebooks for research data analytics - powered by Dimensions Analytics API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Dimensions API Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>