

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Generating a report that monitors research topics across Dimensions sources &mdash; API Lab - reusable notebooks for research data analytics - powered by Dimensions Analytics API</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/js/custom.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enrich text with Field of Research (FoR) codes" href="2-enrich-text-with-for-codes.html" />
    <link rel="prev" title="Welcome to the Dimensions API Lab!" href="../index.html" />
    

   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149959808-1"></script>
   <!-- <script src="_static/js/custom.js"></script> -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DSL
          

          
            
            <img src="../_static/dimensions-logo@2x.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          

   <p class="">
      <h3 id="cookbooks_title">API COOKBOOKS</h3>
   </p>


   
            
            
              
            
            
              <p class="caption"><span class="caption-text">Folder</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generating a report that monitors research topics across Dimensions sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#1.-Creating-a-query-builder">1. Creating a query builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Query-logic">Query logic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.-Plotting-the-results">2. Plotting the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#3.-Conclusions">3. Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2-enrich-text-with-for-codes.html">Enrich text with Field of Research (FoR) codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#A-sample-set-of-publications">A sample set of publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#1.-Loading-the-sample-text">1. Loading the sample text</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#2.-FoR-Classification">2. FoR Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#3.-Number-of-FoR-categories-per-document">3. Number of FoR categories per document</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#4.-Top-FoR-categories-by-document-count">4. Top FoR categories by document count</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-enrich-text-with-for-codes.html#Conclusions">Conclusions</a></li>
</ul>
</li>
</ul>

            
          


   <div id="sidebar_github" style="margin-top: 12px;">
   <h3>Github Source</h3>

      <div style="margin: 10px 20px;">
      
         <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>

         <iframe src="https://ghbtns.com/github-btn.html?user=digital-science&repo=dimensions-api-lab&type=fork&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe> 
      
      </div>

   </div>


        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DSL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    

    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<script src='https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js'></script>
<script>require=requirejs;</script><a class="reference external image-reference" href="https://colab.research.google.com/github/digital-science/dimensions-api-lab/blob/master/cookbooks/1-report-content-volumes-per-year.ipynb"><img alt="../_images/badge-colab.svg" src="../_images/badge-colab.svg" /></a>
<a class="reference external image-reference" href="https://github.com/digital-science/dimensions-api-lab/blob/master/cookbooks/1-report-content-volumes-per-year.ipynb"><img alt="../_images/badge-github-custom.svg" src="../_images/badge-github-custom.svg" /></a>
<hr class="docutils" />
<div class="section" id="Generating-a-report-that-monitors-research-topics-across-Dimensions-sources">
<h1>Generating a report that monitors research topics across Dimensions sources<a class="headerlink" href="#Generating-a-report-that-monitors-research-topics-across-Dimensions-sources" title="Permalink to this headline">¶</a></h1>
<p>This notebook shows how to create a simple that can be run periodically, for example in order to monitor a research area.</p>
<p>By using the steps below it is possible to generate API queries programmatically, based on a predefined list of parameters (eg keywords, years, or fields of research). We will then run these queries on all Dimensions <a class="reference external" href="https://docs.dimensions.ai/dsl/data-sources.html">data sources</a> (publications, grants, clinical trials, patents, policy documentes and datasets).</p>
<p>The resulting dataset provides a snapshot of how much content is available in Dimensions on the selected topic.</p>
<blockquote>
<div><p><strong>IMPORTANT</strong> The notebook is best experienced with <a class="reference external" href="https://colab.research.google.com/">Google Colab</a>, as it includes a number of Colab-only user interface widgets.</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">CHANGELOG</span><span class="se">\n</span><span class="s2">This notebook was last run on </span><span class="si">%s</span><span class="se">\n</span><span class="s2">==&quot;</span> <span class="o">%</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%b </span><span class="si">%d</span><span class="s1">, %Y&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
==
CHANGELOG
This notebook was last run on Jan 24, 2022
==
</pre></div></div>
</div>
<div class="section" id="Prerequisites">
<h2>Prerequisites<a class="headerlink" href="#Prerequisites" title="Permalink to this headline">¶</a></h2>
<p>This notebook assumes you have installed the <a class="reference external" href="https://pypi.org/project/dimcli/">Dimcli</a> library and are familiar with the <a class="reference external" href="https://api-lab.dimensions.ai/cookbooks/1-getting-started/1-Using-the-Dimcli-library-to-query-the-API.html">‘Getting Started’ tutorial</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip install dimcli tqdm plotly -U --quiet

<span class="kn">import</span> <span class="nn">dimcli</span>
<span class="kn">from</span> <span class="nn">dimcli.utils</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="kn">import</span> <span class="n">tqdm</span> <span class="k">as</span> <span class="n">progressbar</span>

<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="c1"># make js dependecies local / needed by html exports</span>
  <span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span>
  <span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Logging in..&quot;</span><span class="p">)</span>
<span class="c1"># https://digital-science.github.io/dimcli/getting-started.html#authentication</span>
<span class="n">ENDPOINT</span> <span class="o">=</span> <span class="s2">&quot;https://app.dimensions.ai&quot;</span>
<span class="k">if</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="kn">import</span> <span class="nn">getpass</span>
  <span class="n">KEY</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;API Key: &#39;</span><span class="p">)</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">ENDPOINT</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">KEY</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">ENDPOINT</span><span class="p">)</span>
<span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Searching config file credentials for &#39;https://app.dimensions.ai&#39; endpoint..
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
==
Logging in..
Dimcli - Dimensions API Client (v0.9.6)
Connected to: &lt;https://app.dimensions.ai/api/dsl&gt; - DSL v2.0
Method: dsl.ini file
</pre></div></div>
</div>
</div>
<div class="section" id="1.-Creating-a-query-builder">
<h2>1. Creating a query builder<a class="headerlink" href="#1.-Creating-a-query-builder" title="Permalink to this headline">¶</a></h2>
<p>We are going to create a series of input fields that allow to generate a query like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">&lt;source-name&gt;</span> <span class="pre">for</span> <span class="pre">&quot;&lt;topic1</span> <span class="pre">AND</span> <span class="pre">topic2&gt;&quot;</span> <span class="pre">where</span> <span class="pre">year=&lt;YYYY&gt;</span> <span class="pre">return</span> <span class="pre">&lt;source-name&gt;</span></code></p>
<p>The idea is to generate programmatically one query per year and Dimensions content type, so to extract some useful statistics about the ‘popularity’ of a topic.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#@title Enter a Search Term</span>

<span class="n">search_term</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">peanut allergy</span><span class="se">\&quot;</span><span class="s2"> AND children&quot;</span>  <span class="c1">#@param {type: &quot;string&quot;}</span>
<span class="c1">#@markdown ---</span>
<span class="n">start_year</span> <span class="o">=</span> <span class="mi">2006</span>  <span class="c1">#@param {type: &quot;slider&quot;, min: 1900, max: 2020}</span>
<span class="n">end_year</span> <span class="o">=</span> <span class="mi">2020</span>  <span class="c1">#@param {type: &quot;slider&quot;, min: 1900, max: 2020}</span>
<span class="c1">#@markdown ---</span>
<span class="n">subject_area</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>  <span class="c1">#@param [&#39;None&#39;, &#39;0101 Pure Mathematics&#39;, &#39;0102 Applied Mathematics&#39;, &#39;0103 Numerical and Computational Mathematics&#39;, &#39;0104 Statistics&#39;, &#39;0105 Mathematical Physics&#39;, &#39;0201 Astronomical and Space Sciences&#39;, &#39;0202 Atomic, Molecular, Nuclear, Particle and Plasma Physics&#39;, &#39;0203 Classical Physics&#39;, &#39;0204 Condensed Matter Physics&#39;, &#39;0205 Optical Physics&#39;, &#39;0206 Quantum Physics&#39;, &#39;0299 Other Physical Sciences&#39;, &#39;0301 Analytical Chemistry&#39;, &#39;0302 Inorganic Chemistry&#39;, &#39;0303 Macromolecular and Materials Chemistry&#39;, &#39;0304 Medicinal and Biomolecular Chemistry&#39;, &#39;0305 Organic Chemistry&#39;, &#39;0306 Physical Chemistry (incl. Structural)&#39;, &#39;0307 Theoretical and Computational Chemistry&#39;, &#39;0399 Other Chemical Sciences&#39;, &#39;0401 Atmospheric Sciences&#39;, &#39;0402 Geochemistry&#39;, &#39;0403 Geology&#39;, &#39;0404 Geophysics&#39;, &#39;0405 Oceanography&#39;, &#39;0406 Physical Geography and Environmental Geoscience&#39;, &#39;0499 Other Earth Sciences&#39;, &#39;0501 Ecological Applications&#39;, &#39;0502 Environmental Science and Management&#39;, &#39;0503 Soil Sciences&#39;, &#39;0599 Other Environmental Sciences&#39;, &#39;0601 Biochemistry and Cell Biology&#39;, &#39;0602 Ecology&#39;, &#39;0603 Evolutionary Biology&#39;, &#39;0604 Genetics&#39;, &#39;0605 Microbiology&#39;, &#39;0606 Physiology&#39;, &#39;0607 Plant Biology&#39;, &#39;0608 Zoology&#39;, &#39;0699 Other Biological Sciences&#39;, &#39;0701 Agriculture, Land and Farm Management&#39;, &#39;0702 Animal Production&#39;, &#39;0703 Crop and Pasture Production&#39;, &#39;0704 Fisheries Sciences&#39;, &#39;0705 Forestry Sciences&#39;, &#39;0706 Horticultural Production&#39;, &#39;0707 Veterinary Sciences&#39;, &#39;0799 Other Agricultural and Veterinary Sciences&#39;, &#39;0801 Artificial Intelligence and Image Processing&#39;, &#39;0802 Computation Theory and Mathematics&#39;, &#39;0803 Computer Software&#39;, &#39;0804 Data Format&#39;, &#39;0805 Distributed Computing&#39;, &#39;0806 Information Systems&#39;, &#39;0807 Library and Information Studies&#39;, &#39;0899 Other Information and Computing Sciences&#39;, &#39;0901 Aerospace Engineering&#39;, &#39;0902 Automotive Engineering&#39;, &#39;0903 Biomedical Engineering&#39;, &#39;0904 Chemical Engineering&#39;, &#39;0905 Civil Engineering&#39;, &#39;0906 Electrical and Electronic Engineering&#39;, &#39;0907 Environmental Engineering&#39;, &#39;0908 Food Sciences&#39;, &#39;0909 Geomatic Engineering&#39;, &#39;0910 Manufacturing Engineering&#39;, &#39;0911 Maritime Engineering&#39;, &#39;0912 Materials Engineering&#39;, &#39;0913 Mechanical Engineering&#39;, &#39;0914 Resources Engineering and Extractive Metallurgy&#39;, &#39;0915 Interdisciplinary Engineering&#39;, &#39;0999 Other Engineering&#39;, &#39;1001 Agricultural Biotechnology&#39;, &#39;1002 Environmental Biotechnology&#39;, &#39;1003 Industrial Biotechnology&#39;, &#39;1004 Medical Biotechnology&#39;, &#39;1005 Communications Technologies&#39;, &#39;1006 Computer Hardware&#39;, &#39;1007 Nanotechnology&#39;, &#39;1099 Other Technology&#39;, &#39;1101 Medical Biochemistry and Metabolomics&#39;, &#39;1102 Cardiorespiratory Medicine and Haematology&#39;, &#39;1103 Clinical Sciences&#39;, &#39;1104 Complementary and Alternative Medicine&#39;, &#39;1105 Dentistry&#39;, &#39;1106 Human Movement and Sports Science&#39;, &#39;1107 Immunology&#39;, &#39;1108 Medical Microbiology&#39;, &#39;1109 Neurosciences&#39;, &#39;1110 Nursing&#39;, &#39;1111 Nutrition and Dietetics&#39;, &#39;1112 Oncology and Carcinogenesis&#39;, &#39;1113 Ophthalmology and Optometry&#39;, &#39;1114 Paediatrics and Reproductive Medicine&#39;, &#39;1115 Pharmacology and Pharmaceutical Sciences&#39;, &#39;1116 Medical Physiology&#39;, &#39;1117 Public Health and Health Services&#39;, &#39;1199 Other Medical and Health Sciences&#39;, &#39;1201 Architecture&#39;, &#39;1202 Building&#39;, &#39;1203 Design Practice and Management&#39;, &#39;1205 Urban and Regional Planning&#39;, &#39;1299 Other Built Environment and Design&#39;, &#39;1301 Education Systems&#39;, &#39;1302 Curriculum and Pedagogy&#39;, &#39;1303 Specialist Studies In Education&#39;, &#39;1399 Other Education&#39;, &#39;1401 Economic Theory&#39;, &#39;1402 Applied Economics&#39;, &#39;1403 Econometrics&#39;, &#39;1499 Other Economics&#39;, &#39;1501 Accounting, Auditing and Accountability&#39;, &#39;1502 Banking, Finance and Investment&#39;, &#39;1503 Business and Management&#39;, &#39;1504 Commercial Services&#39;, &#39;1505 Marketing&#39;, &#39;1506 Tourism&#39;, &#39;1507 Transportation and Freight Services&#39;, &#39;1601 Anthropology&#39;, &#39;1602 Criminology&#39;, &#39;1603 Demography&#39;, &#39;1604 Human Geography&#39;, &#39;1605 Policy and Administration&#39;, &#39;1606 Political Science&#39;, &#39;1607 Social Work&#39;, &#39;1608 Sociology&#39;, &#39;1699 Other Studies In Human Society&#39;, &#39;1701 Psychology&#39;, &#39;1702 Cognitive Sciences&#39;, &#39;1799 Other Psychology and Cognitive Sciences&#39;, &#39;1801 Law&#39;, &#39;1899 Other Law and Legal Studies&#39;, &#39;1901 Art Theory and Criticism&#39;, &#39;1902 Film, Television and Digital Media&#39;, &#39;1903 Journalism and Professional Writing&#39;, &#39;1904 Performing Arts and Creative Writing&#39;, &#39;1905 Visual Arts and Crafts&#39;, &#39;1999 Other Studies In Creative Arts and Writing&#39;, &#39;2001 Communication and Media Studies&#39;, &#39;2002 Cultural Studies&#39;, &#39;2003 Language Studies&#39;, &#39;2004 Linguistics&#39;, &#39;2005 Literary Studies&#39;, &#39;2099 Other Language, Communication and Culture&#39;, &#39;2101 Archaeology&#39;, &#39;2102 Curatorial and Related Studies&#39;, &#39;2103 Historical Studies&#39;, &#39;2199 Other History and Archaeology&#39;, &#39;2201 Applied Ethics&#39;, &#39;2202 History and Philosophy of Specific Fields&#39;, &#39;2203 Philosophy&#39;, &#39;2204 Religion and Religious Studies&#39;, &#39;2299 Other Philosophy and Religious Studies&#39;]</span>
<span class="c1">#@markdown ---</span>

<span class="c1"># note:</span>
<span class="c1"># for subject areas, the dropdown can be generated with this line:</span>
<span class="c1"># `str([&quot;%s&quot; % s for s in  sorted(dimcli.G.categories(&#39;category_for&#39;)) if len(s.split()[0]) &gt; 2])`</span>
<span class="c1">#</span>


<span class="c1">#</span>
<span class="c1"># define query templates for each source</span>
<span class="c1">#</span>

<span class="n">q_template_sources</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;clinical_trials&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where active_years={} {} return {} limit 1&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;grants&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where active_year={} {} return {} limit 1&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;patents&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where granted_year={} {} return {} limit 1&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;policy_documents&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where year={} {} return {} limit 1&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;datasets&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where year={} {} return {} limit 1&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;publications&#39;</span> <span class="p">:</span>
      <span class="sd">&quot;&quot;&quot;search {} for \&quot;{}\&quot; where year={} {} return {} limit 1&quot;&quot;&quot;</span>
<span class="p">}</span>

<span class="c1"># fix Python escapes</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">search_term</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\&quot;</span><span class="s2">&quot;</span> <span class="p">)</span>

<span class="c1"># subject area query component</span>
<span class="k">if</span> <span class="n">subject_area</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
  <span class="n">subject_area_q</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">subject_area_q</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot; and FOR.name=&quot;</span><span class="si">{</span><span class="n">subject_area</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span>

<span class="c1"># ensure end year is &gt; start year and explode range</span>
<span class="k">if</span> <span class="n">end_year</span> <span class="o">&lt;</span> <span class="n">start_year</span><span class="p">:</span>
  <span class="n">end_year</span> <span class="o">=</span> <span class="n">start_year</span>
<span class="n">years</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># finally print some info</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====SELECTION====&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Search term:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">search_term</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Years:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Subject:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">subject_area</span> <span class="ow">or</span> <span class="s2">&quot;--&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=================&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
====SELECTION====
Search term:
 &#34;peanut allergy&#34; AND children
Years:
 2006 to 2020
Subject:
 None
=================
</pre></div></div>
</div>
<div class="section" id="Query-logic">
<h3>Query logic<a class="headerlink" href="#Query-logic" title="Permalink to this headline">¶</a></h3>
<p>In this section we use the parameters from the query builder form, so to generate API queries programmatically. Note:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">q_template_sources</span></code> mapping above is used to to generate a (slightly) different query for each Dimensions document type</p></li>
<li><p>a different query is generated for each year (<code class="docutils literal notranslate"><span class="pre">years</span></code> variable)</p></li>
<li><p>we pause for one second after each query (<code class="docutils literal notranslate"><span class="pre">time.sleep(1)</span></code>), to ensure we never hit the API quota (30 queries per minute)</p></li>
</ul>
<p>TIP: if the progress bar doesn’t display correctly, just stop and restart the cell.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The next function runs a query against each Dimensions sources</span>

<span class="k">def</span> <span class="nf">multi_search</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
  <span class="s2">&quot;Launch multiple keyword searches across DSL sources&quot;</span>

  <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

  <span class="n">loop1</span> <span class="o">=</span> <span class="n">progressbar</span><span class="p">(</span><span class="n">q_template_sources</span><span class="p">)</span>
  <span class="n">loop2</span> <span class="o">=</span> <span class="n">progressbar</span><span class="p">(</span><span class="n">years</span><span class="p">)</span>

  <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">loop1</span><span class="p">:</span>
    <span class="n">loop1</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;Source: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">q_template</span> <span class="o">=</span> <span class="n">q_template_sources</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">loop2</span><span class="p">:</span>
      <span class="n">loop2</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;Year: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">y</span><span class="p">)</span>

      <span class="n">q</span> <span class="o">=</span> <span class="n">q_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">keywords</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">subject_area_q</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

      <span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

      <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;source&#39;</span> <span class="p">:</span> <span class="n">s</span><span class="p">,</span> <span class="s1">&#39;objects&#39;</span> <span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">count_total</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span> <span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;query&#39;</span> <span class="p">:</span> <span class="n">q</span><span class="p">})</span>
      <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Searching in document types:&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">q_template_sources</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">multi_search</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># tip: set verbose to True to see the API queries details</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Searching in document types: [&#39;clinical_trials&#39;, &#39;grants&#39;, &#39;patents&#39;, &#39;policy_documents&#39;, &#39;datasets&#39;, &#39;publications&#39;]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "1d184470436f484485b7f4fd059ef63d", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "571b46deae1a4dee9fe682e5d4ca6515", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>source</th>
      <th>objects</th>
      <th>year</th>
      <th>query</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>clinical_trials</td>
      <td>4</td>
      <td>2006</td>
      <td>search clinical_trials for "\"peanut allergy\"...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>clinical_trials</td>
      <td>6</td>
      <td>2007</td>
      <td>search clinical_trials for "\"peanut allergy\"...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>clinical_trials</td>
      <td>11</td>
      <td>2008</td>
      <td>search clinical_trials for "\"peanut allergy\"...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>clinical_trials</td>
      <td>14</td>
      <td>2009</td>
      <td>search clinical_trials for "\"peanut allergy\"...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>clinical_trials</td>
      <td>19</td>
      <td>2010</td>
      <td>search clinical_trials for "\"peanut allergy\"...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>85</th>
      <td>publications</td>
      <td>1061</td>
      <td>2016</td>
      <td>search publications for "\"peanut allergy\" AN...</td>
    </tr>
    <tr>
      <th>86</th>
      <td>publications</td>
      <td>1119</td>
      <td>2017</td>
      <td>search publications for "\"peanut allergy\" AN...</td>
    </tr>
    <tr>
      <th>87</th>
      <td>publications</td>
      <td>1121</td>
      <td>2018</td>
      <td>search publications for "\"peanut allergy\" AN...</td>
    </tr>
    <tr>
      <th>88</th>
      <td>publications</td>
      <td>1706</td>
      <td>2019</td>
      <td>search publications for "\"peanut allergy\" AN...</td>
    </tr>
    <tr>
      <th>89</th>
      <td>publications</td>
      <td>1393</td>
      <td>2020</td>
      <td>search publications for "\"peanut allergy\" AN...</td>
    </tr>
  </tbody>
</table>
<p>90 rows × 4 columns</p>
</div></div>
</div>
</div>
</div>
<div class="section" id="2.-Plotting-the-results">
<h2>2. Plotting the results<a class="headerlink" href="#2.-Plotting-the-results" title="Permalink to this headline">¶</a></h2>
<p>In this section we use <a class="reference external" href="https://plotly.com/python/">plotly</a> in order to visualize the data we extracted.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
       <span class="n">names</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span>
       <span class="n">values</span><span class="o">=</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span>
       <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Total documents matching the query: </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">keywords</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>                            <div id="91b0d630-2be5-456e-b7f2-854e884830f2" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("91b0d630-2be5-456e-b7f2-854e884830f2")) {                    Plotly.newPlot(                        "91b0d630-2be5-456e-b7f2-854e884830f2",                        [{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"hovertemplate":"source=%{label}<br>objects=%{value}<extra></extra>","labels":["clinical_trials","datasets","grants","patents","policy_documents","publications"],"legendgroup":"","name":"","showlegend":true,"values":[421,5,288,253,78,13014],"type":"pie"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"legend":{"tracegroupgap":0},"title":{"text":"Total documents matching the query: \"\\\"peanut allergy\\\" AND children\""}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('91b0d630-2be5-456e-b7f2-854e884830f2');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span>
        <span class="n">line_group</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Yearly breakdown of documents matching the query: </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">keywords</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>                            <div id="8ec5ab17-8294-4641-8eed-6b13dcde366f" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("8ec5ab17-8294-4641-8eed-6b13dcde366f")) {                    Plotly.newPlot(                        "8ec5ab17-8294-4641-8eed-6b13dcde366f",                        [{"hovertemplate":"source=clinical_trials<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"clinical_trials","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"clinical_trials","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[4,6,11,14,19,23,28,32,36,36,35,42,50,45,40],"yaxis":"y","type":"scatter"},{"hovertemplate":"source=grants<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"grants","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"grants","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[6,7,6,6,17,20,21,24,19,22,25,27,24,35,29],"yaxis":"y","type":"scatter"},{"hovertemplate":"source=patents<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"patents","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"patents","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[10,9,8,8,10,15,27,12,17,12,23,17,19,30,36],"yaxis":"y","type":"scatter"},{"hovertemplate":"source=policy_documents<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"policy_documents","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"policy_documents","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[1,5,0,2,5,12,8,4,10,7,9,7,3,1,4],"yaxis":"y","type":"scatter"},{"hovertemplate":"source=datasets<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"datasets","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"datasets","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[0,0,0,0,0,1,0,1,0,1,0,0,1,0,1],"yaxis":"y","type":"scatter"},{"hovertemplate":"source=publications<br>year=%{x}<br>objects=%{y}<extra></extra>","legendgroup":"publications","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"publications","orientation":"v","showlegend":true,"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[351,580,575,587,528,686,674,676,947,1010,1061,1119,1121,1706,1393],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"objects"}},"legend":{"title":{"text":"source"},"tracegroupgap":0},"title":{"text":"Yearly breakdown of documents matching the query: \"\\\"peanut allergy\\\" AND children\""}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('8ec5ab17-8294-4641-8eed-6b13dcde366f');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div>
</div>
<p>Tip: click on the legend on the right in order to hide/reveal specific sources.</p>
</div>
<div class="section" id="3.-Conclusions">
<h2>3. Conclusions<a class="headerlink" href="#3.-Conclusions" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial we have seen how to leverage Google Colab and Python functionalities in order to generate API queries programmatically. This approach makes it possible to create a simple report that can be run periodically, for example in order to monitor a research area.</p>
<p>You can try changing the query templates in section 1 to carry out different kinds of analyses, for example:</p>
<ul class="simple">
<li><p>to monitor differences in publications results, depending on whether one searches in the full text, title, or abstract (see the available <a class="reference external" href="https://docs.dimensions.ai/dsl/datasource-publications.html#publications-search-indexes">publications search indices</a>)</p></li>
<li><p>to monitor differences in content volumes from different countries, organizations or funders</p></li>
</ul>
<p>For more information on what options are available, please see the <a class="reference external" href="https://docs.dimensions.ai/dsl/">API documentation</a>.</p>
</div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference external" href="https://www.dimensions.ai/dimensions-apis/">Dimensions Analytics API</a> allows to carry out sophisticated research data analytics tasks like the ones described on this website. Check out also the associated <a class="reference external" href="https://github.com/digital-science/dimensions-api-lab">Github repository</a> for examples, the source code of these tutorials and much more.</p>
</div>
<a class="reference external image-reference" href="https://www.dimensions.ai/dimensions-apis/"><img alt="../_images/badge-dimensions-api.svg" src="../_images/badge-dimensions-api.svg" /></a>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    <p>© Copyright 2020 Digital Science & Research Solutions, Inc. All Rights Reserved | <a href="https://www.dimensions.ai/">About us</a> · <a href="https://www.dimensions.ai/privacy/">Privacy policy</a> · <a href="https://www.dimensions.ai/website-terms/">Legal terms</a></p>
     

    <!-- OneTrust Cookies Settings button start -->
    <button id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</button>
    <!-- OneTrust Cookies Settings button end -->



</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    

    <!-- Adds target=_blank to external links -->

  <script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


  <!-- OneTrust Cookies Consent Notice start for dimensions.ai -->
   <script type="text/javascript" src="https://cdn.cookielaw.org/consent/3329b668-7887-4dba-9bee-c3853a706e6f/OtAutoBlock.js" ></script>
   <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="3329b668-7887-4dba-9bee-c3853a706e6f" ></script>
   <script type="text/javascript">
   function OptanonWrapper() { }
   </script>
   <!-- OneTrust Cookies Consent Notice end for dimensions.ai -->
  


</body>
</html>